<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lab 14: Sensors 1 - Mobile Applications for Engineers and Technologists</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../Introduction.html">Introduction</a></li><li class="chapter-item affix "><li class="part-title">Kotlin</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> Kotlin Labs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Kotlin/Lab_1/Lab_1.html"><strong aria-hidden="true">1.1.</strong> Lab 1: Hello World and more!</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_2/2_Kotlin_Intro.html"><strong aria-hidden="true">1.2.</strong> Lab 2: Introduction to Kotlin</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_3/Lab_3.html"><strong aria-hidden="true">1.3.</strong> Lab 3: Android User Interface Part 1</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_4/Lab_4.html"><strong aria-hidden="true">1.4.</strong> Lab 4: Android User Interface Part 2</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_5/Lab_5.html"><strong aria-hidden="true">1.5.</strong> Lab 5: User Input, Variables and Operations. Part 1</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_6/Lab_6.html"><strong aria-hidden="true">1.6.</strong> Lab 6: User Input, Variables and Operations. Part 2</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_7/Lab_7.html"><strong aria-hidden="true">1.7.</strong> Lab 7: Android App using Icons and Decision Making Controls. Part 1</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_8/Lab_8.html"><strong aria-hidden="true">1.8.</strong> Lab 8: Android App using Icons and Decision Making Controls. Part 2</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_9/Lab_9-1.html"><strong aria-hidden="true">1.9.</strong> Lab 9.1: One Dimensional Arrays (Intellij)</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_9/Lab_9-2.html"><strong aria-hidden="true">1.10.</strong> Lab 9.2: Lists, Arrays and Web Browsers</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_9-3/Lab_9-3.html"><strong aria-hidden="true">1.11.</strong> Lab 9.3: Lists, Arrays and Web Browsers</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_10/Lab_10.html"><strong aria-hidden="true">1.12.</strong> Lab 10: Exception Handling</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_11/Lab_11.html"><strong aria-hidden="true">1.13.</strong> Lab 11: Kotlin Object Orientated Programming</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_12/Lab_12.html"><strong aria-hidden="true">1.14.</strong> Lab 12: OOP with Data Storage</a></li><li class="chapter-item "><a href="../../Kotlin/Lab_13/Lab_13.html"><strong aria-hidden="true">1.15.</strong> Lab 13: Permissions</a></li><li class="chapter-item expanded "><a href="../../Kotlin/Lab_14/Lab_14.html" class="active"><strong aria-hidden="true">1.16.</strong> Lab 14: Sensors 1</a></li><li class="chapter-item "><div><strong aria-hidden="true">1.17.</strong> Lab 15: Sensors 2</div></li><li class="chapter-item "><a href="../../Kotlin/Lab_16/Lab_16.html"><strong aria-hidden="true">1.18.</strong> Lab 16: Splash Screens</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Java</li><li class="chapter-item "><div><strong aria-hidden="true">2.</strong> Java Labs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../Java/Lab_1/Lab_1.html"><strong aria-hidden="true">2.1.</strong> Lab 1: Hello World and More!</a></li><li class="chapter-item "><a href="../../Java/Lab_2/Lab_2.html"><strong aria-hidden="true">2.2.</strong> Lab 2: User Interface. Part 1</a></li><li class="chapter-item "><a href="../../Java/Lab_3/Lab_3.html"><strong aria-hidden="true">2.3.</strong> Lab 3: User Interface. Part 2</a></li><li class="chapter-item "><a href="../../Java/Lab_4/Lab_4.html"><strong aria-hidden="true">2.4.</strong> Lab 4: User Input, Variables and Operations. Part 1</a></li><li class="chapter-item "><a href="../../Java/Lab_5/Lab_5.html"><strong aria-hidden="true">2.5.</strong> Lab 5: User Input, Variables and Operations. Part 2</a></li><li class="chapter-item "><a href="../../Java/Lab_6/Lab_6.html"><strong aria-hidden="true">2.6.</strong> Lab 6: Icons and Decision Making Controls Pt1</a></li><li class="chapter-item "><a href="../../Java/Lab_7/Lab_7.html"><strong aria-hidden="true">2.7.</strong> Lab 7: Icons and Decision Making Controls Pt 2 </a></li><li class="chapter-item "><a href="../../Java/Lab_8/Lab_8-1.html"><strong aria-hidden="true">2.8.</strong> Lab 8.1: One Dimensional Arrays (Intellij)</a></li><li class="chapter-item "><a href="../../Java/Lab_8/Lab_8-2.html"><strong aria-hidden="true">2.9.</strong> Lab 8.2: Lists, Arrays and Web Browsers Pt1</a></li><li class="chapter-item "><a href="../../Java/Lab_9/Lab_9.html"><strong aria-hidden="true">2.10.</strong> Lab 9: Lists, Arrays and Web Browsers Pt2 </a></li><li class="chapter-item "><a href="../../Java/Lab_10/Lab_10.html"><strong aria-hidden="true">2.11.</strong> Lab 10: Exception Handling</a></li><li class="chapter-item "><a href="../../Java/Lab_11/Lab_11.html"><strong aria-hidden="true">2.12.</strong> Lab 11: Java Object Orientated Programming</a></li><li class="chapter-item "><a href="../../Java/Lab_12/Lab_12.html"><strong aria-hidden="true">2.13.</strong> Lab 12: Permissions</a></li><li class="chapter-item "><a href="../../Java/Lab_13/Lab_13.html"><strong aria-hidden="true">2.14.</strong> Lab 13: Sensors 1</a></li><li class="chapter-item "><a href="../../Java/Lab_14/Lab_14.html"><strong aria-hidden="true">2.15.</strong> Lab 14: Sensors 2</a></li><li class="chapter-item "><a href="../../Java/Lab_15/Lab_15.html"><strong aria-hidden="true">2.16.</strong> Lab 15: Splash Screens</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Assignments</li><li class="chapter-item "><a href="../../COMP1836_Assignment_1/COMP1836_Assignment_1.html"><strong aria-hidden="true">3.</strong> Comp1836 Assignment 1</a></li><li class="chapter-item "><a href="../../COMP1836_Assignment_2/COMP1836_Assignment_2.html"><strong aria-hidden="true">4.</strong> Comp1836 Assignment 2</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item "><a href="../../ELEE1146_Assignment_1/ELEE1146_Assignment_1.html"><strong aria-hidden="true">5.</strong> ELEE1146 Assignment 1</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mobile Applications for Engineers and Technologists</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/cccu-uk/ELEE1149-COMP1836_Exercises" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/cccu-uk/ELEE1149-COMP1836_Exercises/edit/master/content/Kotlin/Lab_14/Lab_14.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lab-14-sensors-1"><a class="header" href="#lab-14-sensors-1">Lab 14: Sensors 1</a></h1>
<p>You are going to see how to use the <code>Sensor</code> and <code>SensorManager</code> classes to see which sensors are available and some of their fields. You will also learn of the classes <code>Field</code>, <code>StringBuilder</code>, <code>Pattern</code> and concept of <strong>reflection</strong>.</p>
<p>Open Android Studio and create a new project and call it <code>allofthesensors</code>.</p>
<h2 id="step-1-activity_mainxml"><a class="header" href="#step-1-activity_mainxml">Step 1: <code>activity_main.xml</code></a></h2>
<p>First off in the <code>activity_main.xml</code> design view add:</p>
<ol>
<li>
<p>a <code>Spinner</code> widget offset from the top of the screen, remember to constrain the to edges of the screen.</p>
</li>
<li>
<p>Set the width as <code>408dp</code> and height as <code>61dp</code></p>
</li>
<li>
<p>change id to <code>sensorsSP</code></p>
</li>
<li>
<p>Likewise grab a <code>TextView</code> and add it to the the middle of the screen, again anchoring it in place.</p>
</li>
<li>
<p>Set the width as <code>234dp</code> and height as <code>284dp</code></p>
</li>
<li>
<p>change id to <code>sensorInfoTV</code></p>
<div align=center>
<p><img src="figures/step1.png" alt="" /></p>
</div>
</li>
</ol>
<h2 id="step-2-stringsxml"><a class="header" href="#step-2-stringsxml">Step 2: <code>strings.xml</code></a></h2>
<ol start="7">
<li>
<p>Open the <code>strings.xml</code> and add the following string resources:</p>
<div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Text</th></tr></thead><tbody>
<tr><td>app_name</td><td>AllOfTheSensors</td></tr>
<tr><td>total_sensors</td><td>Total # Sensors:</td></tr>
<tr><td>spinnerPrompt</td><td>Select a sensor</td></tr>
</tbody></table>
</div></li>
<li>
<p>Remember to refernce the string resources in the <code>activity_main.xml</code> widgets you have added.</p>
</li>
</ol>
<h2 id="step-3-mainactivitykt"><a class="header" href="#step-3-mainactivitykt">Step 3: <code>MainActivity.kt</code></a></h2>
<ol start="9">
<li>
<p>Open the <code>MainActivity.kt</code> and add to the top of the class:</p>
<pre><code class="language-kt">...
class MainActivity : AppCompatActivity() {
    private var mgr: SensorManager? = null // Declare a SensorManager object
    ...
}
</code></pre>
</li>
<li>
<p>Next we need initialise the various UI elements. You should know how to do this by now:</p>
<details>
<summary>Solution</summary>
<pre><code class="language-kt">...
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main) // Set the content view to the activity_main layout

    // Initialise various UI elements
    val sensorInfoTV: TextView = findViewById(R.id.sensorInfoTV)
    val sensorsSP: Spinner = findViewById(R.id.sensorsSP)
    val sensorCountTV: TextView = findViewById(R.id.sensorCountTV)

    ...
}
</code></pre>
</details>
</li>
<li>
<p>Now we need to declare and initialise the a list for the <code>spinner</code> widget. Then initialise the <code>mgr</code> our <code>SensorManager</code> object and populate the list with all the sensor names.</p>
<pre><code class="language-kt">override fun onCreate(savedInstanceState: Bundle?) {
    ...
    val sensorList = ArrayList&lt;String&gt;() // Initialise a list to store sensor names
    mgr = getSystemService(SENSOR_SERVICE) as SensorManager // Initialise the SensorManager we declared earlier

    // get the all available sensors and populate the sensorList their names
    for (s in mgr!!.getSensorList(Sensor.TYPE_ALL)) {
        sensorList.add(s.name)
    }
    ...
}
</code></pre>
</li>
<li>
<p>We could count the number of sensors using <code>mgr!!.getSensorList(Sensor.TYPE_ALL)</code>, but there is no need to invoke all of that again, instead will can just get the <code>size</code> of the <code>sensorList</code>. After the <code>for</code> loop append the <code>sensorCountTV</code> with the number of sensors:</p>
<pre><code class="language-kt">    ...
    for (s in mgr...)
    {
        ...
    }
    
    // Append the count of available sensors to the sensorCountTV TextView
    sensorCountTV.append(sensorList.size.toString())
</code></pre>
</li>
<li>
<p>Now we need to create an object of the <code>ArrayAdapter</code> so we can fill the <code>spinner</code> widget with <code>sensorList</code>. After the sensorCountTV do the following:</p>
<pre><code class="language-kt">    ...
    sensorCountTV.append(...)

    // Create an ArrayAdapter to display the sensor names in a Spinner
    val arrayAdapter = ArrayAdapter(this, android.R.layout.simple_spinner_item, sensorList)
    arrayAdapter.setDropDownViewResource(com.google.android.material.R.layout.support_simple_spinner_dropdown_item)
    sensorsSP.adapter = arrayAdapter
    ...
}
</code></pre>
</li>
</ol>
<h2 id="step-4-getting-the-sensor-attributes-and-characteristics"><a class="header" href="#step-4-getting-the-sensor-attributes-and-characteristics">Step 4: Getting the Sensor Attributes and Characteristics</a></h2>
<ol start="14">
<li>
<p>After setting the <code>sensorsSP.adapter ...</code> we need to write the code so that when the spinner item is selected we can retrieve the attributes and characteristics of the selected sensor:</p>
<pre><code class="language-kt">
sensorsSP.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
            override fun onItemSelected(adapterView: AdapterView&lt;*&gt;?, view: View, i: Int, l: Long) {

            }
}
</code></pre>
<p>The above code should look very familiar as we have done the a <code>spinner.onItemSelectedListener</code></p>
</li>
<li>
<p>Now we have our <code>onItemSelectedListener</code> we need to get the selected item</p>
<pre><code class="language-kt">...
AdapterView&lt;*&gt;?, view: View, i: Int, l: Long) {               
    for (s in mgr!!.getSensorList(Sensor.TYPE_ALL)) {
        // get selected sensor
        val selectedSensor: String = sensorsSP.getSelectedItem().toString()
    }
}
</code></pre>
</li>
<li>
<p>By using an <code>if</code> statement we can compare the <code>selectedSensor</code> against the current sensor (<code>s</code>) in the sensor manager (<code>mgr</code>). If the <code>s.name</code> matches the <code>selectedSensor</code> then we can initialise a <code>StringBuilder</code> object.</p>
<pre><code class="language-kt">...
val selectedSensor: String = sensorsSP.getSelectedItem().toString()

// Check if the selected sensor's name matches the current sensor's name
if (s.name === selectedSensor) {
    val stringBuilder = StringBuilder()

}
</code></pre>
<blockquote>
<p><strong>Note</strong></p>
<blockquote>
<p>In Kotlin there are two types of equality:</p>
<ul>
<li>Structural equality ( <code>==</code> - a check for equals() )</li>
<li>Referential equality ( <code>===</code> - two references point to the same object
So <code>s.name</code> is an object and <code>selectedSensor</code> as a string is technically an object when compated this way.</li>
</ul>
</blockquote>
</blockquote>
</li>
<li>
<p>Now we are going to implement <strong>reflection</strong> in order to call all the functions that are not private and take no arguments. The aim here is to find out as much as we can about each sensor object through open,non nullable methods with a paramenter size of 0.</p>
<pre><code class="language-kt">// Iterate through the methods of the sensor's class
for (method in s.javaClass.methods) {
    try {
        // Use reflection to find and call methods with certain criteria
        val methodFound: KFunction&lt;*&gt;? = s::class.members.find { 
            it.name === method.name 
        } as? KFunction&lt;*&gt;
        if (methodFound != null &amp;&amp; methodFound.isOpen &amp;&amp; methodFound.parameters.size &lt;= 1) {
            // Append method name and result to the StringBuilder
            stringBuilder.append(method.name)
            .append(": ", methodFound.call(s)).append("\n")
        }
    } catch (e: ReflectiveOperationException) {
        // Handle exceptions if the method is not found
        var error: String = e.message.toString()
        Toast.makeText(this@MainActivity,"${e.message}",Toast.LENGTH_LONG)
        stringBuilder.append(": Error\n")
    }
}
</code></pre>
<p>There is a lot to break down here and while the comments provide a top level explanation:</p>
<ul>
<li><code>KFunction&lt;*&gt;</code> is a useful class that enables the program...
<pre><code class="language-kt">val methodFound: KFunction&lt;*&gt;? = s::class.members.find { 
            it.name === method.name 
      } as? KFunction&lt;*&gt;
</code></pre>
</li>
<li>we can see that the <code>lambda</code> expression is used <code>it</code> to.. and that this is compared using object comparison syntax <code>===</code>.</li>
<li>The <code>if</code> condition
<pre><code class="language-kt">if (methodFound != null &amp;&amp; methodFound.isOpen 
                              &amp;&amp; methodFound.parameters.size &lt;= 1)
</code></pre>
</li>
</ul>
</li>
</ol>
<p>You should be good to run the program now, create virtual device and test the app.</p>
<div align=center>
<p><img src="./figures/AllofSensorsList.png" alt="" /><img src="./figures/Sensor_Orientation.png" alt="" /></p>
</div>
<p>Once, tried with one type of virtual device, try using a different one, see if you get different sensors.</p>
<h2 id="3-full-code-below"><a class="header" href="#3-full-code-below">3. Full code below.</a></h2>
<details>
<summary>MainActivity</summary>
<pre><code class="language-kt">package com.example.mobileapps_allofthesensors

import android.hardware.Sensor
import android.hardware.SensorManager
import android.os.Bundle
import android.view.View
import android.widget.AdapterView
import android.widget.ArrayAdapter
import android.widget.Spinner
import android.widget.TextView
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import kotlin.reflect.KFunction

class MainActivity : AppCompatActivity() {
    private var mgr: SensorManager? = null // Declare a SensorManager object

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main) // Set the content view to the activity_main layout

        // Initialise various UI elements
        val sensorInfoTV: TextView = findViewById(R.id.sensorInfoTV)
        val sensorsSP: Spinner = findViewById(R.id.sensorsSP)
        val sensorCountTV: TextView = findViewById(R.id.sensorCountTV)

        val sensorList = ArrayList&lt;String&gt;() // Create a list to store sensor names
        mgr = getSystemService(SENSOR_SERVICE) as SensorManager // Initialise the SensorManager

        // Retrieve the list of available sensors and populate the sensorList
        for (s in mgr!!.getSensorList(Sensor.TYPE_ALL)) {
            sensorList.add(s.name)
        }

        // Append the count of available sensors to the sensorCountTV TextView
        sensorCountTV.append(sensorList.size.toString())

        // Create an ArrayAdapter to display the sensor names in a Spinner
        val arrayAdapter = ArrayAdapter(this, android.R.layout.simple_spinner_item, sensorList)
        arrayAdapter.setDropDownViewResource(com.google.android.material.R.layout.support_simple_spinner_dropdown_item)
        sensorsSP.adapter = arrayAdapter

        // Set an item selected listener for the Spinner
        sensorsSP.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {
            override fun onItemSelected(adapterView: AdapterView&lt;*&gt;?, view: View, i: Int, l: Long) {
                for (s in mgr!!.getSensorList(Sensor.TYPE_ALL)) {
                    val selectedSensor: String = sensorsSP.getSelectedItem().toString()

                    // Check if the selected sensor's name matches the current sensor's name
                    if (s.name === selectedSensor) {
                        val stringBuilder = StringBuilder()

                        // Iterate through the methods of the sensor's class
                        for (method in s.javaClass.methods) {
                            try {
                                // Use reflection to find and call methods with certain criteria
                                val methodFound: KFunction&lt;*&gt;? =
                                    s::class.members.find { it.name == method.name } as? KFunction&lt;*&gt;
                                if (methodFound != null &amp;&amp; methodFound.isOpen &amp;&amp; methodFound.parameters.size &lt;= 1) {
                                    // Append method name and result to the StringBuilder
                                    stringBuilder.append(method.name)
                                        .append(": ", methodFound.call(s)).append("\n")
                                }
                            } catch (e: ReflectiveOperationException) {
                                // Handle exceptions if the method is not found
                                var error: String = e.message.toString()
                                Toast.makeText(this@MainActivity,"${e.message}",Toast.LENGTH_LONG)
                                stringBuilder.append(": Error\n")
                            }
                        }
                        // Display sensor information in the sensorInfoTV TextView
                        sensorInfoTV.text = stringBuilder
                        break
                    }
                }
            }

            override fun onNothingSelected(adapterView: AdapterView&lt;*&gt;?) {
                // This function is empty as no action is needed when nothing is selected.

                sensorInfoTV.text = ""
            }
        }
    }
}
</code></pre>
</details>
<details>
<summary>main_activity xml</summary>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"&gt;

    &lt;Spinner
        android:id="@+id/sensorsSP"
        android:layout_width="408dp"
        android:layout_height="61dp"
        android:spinnerMode="dialog"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.0"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_bias="0.104" /&gt;

    &lt;TextView
        android:id="@+id/sensorInfoTV"
        android:layout_width="234dp"
        android:layout_height="284dp"
        android:text="TextView"
        android:textColor="@color/black"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
</details>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../Kotlin/Lab_13/Lab_13.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../Kotlin/Lab_16/Lab_16.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../Kotlin/Lab_13/Lab_13.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../Kotlin/Lab_16/Lab_16.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
